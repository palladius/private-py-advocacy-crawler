# short:
{"author_name": "Riccardo Carlesso", "published_time": "2023-12-19T10:11:19.056Z", "title": "Hey Bard, write a responsive Javascript Search Engine app for me..", "twitter_creator": "@sreccardo", "twitter_image": "https://miro.medium.com/v2/da:true/resize:fit:1200/0*GRWdYdfz_8efocft", "content": "[Redacted]"}
{"author_name": "Romin Irani", "published_time": "2024-05-28T05:15:52.024Z", "title": "A Tale of Two Functions : Function calling in Gemini", "twitter_creator": "@iRomin", "twitter_image": "https://miro.medium.com/v2/resize:fit:516/0*fLheUnd_9lJrbzIH.png", "content": "[Redacted]"}
{"author_name": "Karl Weinmeister", "published_time": "2024-06-19T13:30:44.558Z", "title": "From notebook to Cloud Run service in 10 minutes: applied to Gemini Function Calling", "twitter_creator": "@kweinmeister", "twitter_image": "https://miro.medium.com/v2/da:true/resize:fit:1067/0*ojcMGsB2ds_23iym", "content": "[Redacted]"}
{"author_name": "Riccardo Carlesso", "published_time": "2024-03-05T15:38:18.048Z", "title": "Gemma is born!", "twitter_creator": "@sreccardo", "twitter_image": "https://miro.medium.com/v2/resize:fit:925/1*zktJLAqzgGa4ISoynpyMSQ.jpeg", "content": "[Redacted]"}
# long:
{"author_name": "Romin Irani", "published_time": "2024-05-28T05:15:52.024Z", "title": "A Tale of Two Functions : Function calling in Gemini", "twitter_creator": "@iRomin", "twitter_image": "https://miro.medium.com/v2/resize:fit:516/0*fLheUnd_9lJrbzIH.png", "content": [["Google Cloud - Community", "Listen", "Share", "Building a Generative AI application comes with its own set of interesting challenges. This is especially true when you are trying to use the foundation models in combination with your own data. I am sure that you would agree if you could use the power of natural language understanding and generation of a foundation model and use that to infuse its responses with your own data served via your applications APIs, it would make for a very powerful combination.", ", as they call it, is the ability to tell the model to determine which of the functions should be called to meet the request that you have sent to it, via a prompt. I probably made a terrible attempt to describe the feature in my own words but let me augment that with what some of the vendors say:", "While there are several articles and tutorial on Function calling, my goal in this blog post is the following:", "This by no means is a definitive tutorial on this subject and my goal is to highlight how it works step by step and convince myself that it works too. All the code samples are in Java language (not Python). Its not about a language preference here but I\u2019d like to bump up more samples in Java language. If you choose any other language for which the Vertex AI client library is available, you should ideally be able to port the code accordingly.", "If you prefer to jump to the code, you can hop over to the Github repository on the same.", "github.com", "I have found it a bit difficult to wrap my head around Function calling, when articles define the feature instead of using an example straight up (which I have been guilty of doing in this article too :-)). So let\u2019s understand what we are trying to do first.", "Consider that I have an inventory API that has been designed, implemented and deployed for my distribution company. The inventory API provides me information on the following two high level entities:", "For simplicity, let us consider two magical functions (the implementation is not important here), that have the following signatures:", "Given this, we would like to create a Chatbot application for the organization, that allows anyone to use any of the following prompts to get the information on either the warehouse or specific inventory available at a specific warehouse location.", "Sample prompts that one can provide are given below:", "You would agree that if we simply give these prompts to a foundation model, it is going to respond saying that it is not able to answer this question or worse, it might even end up giving hallucinating.", "What we want instead is a way for the model to interpret the prompt and determine that our functions/tools/APIs (pick your terminology) need to be invoked and then the response needs to be formatted back and given back as the prompt response.", "Two points arise over here:", "More questions follow and for that let us consider the scenarios via the sample prompt.", "Where is warehouse ", " ", "?\u201d", "This prompt clearly indicates that the LLM needs to consider calling the ", " function with ", " as the value for the input parameter ", ".", "How ", " of ", " and ", " do we have in warehouse ", "?", "This would require ", "invocations of ", " function, once with ", " of ", "and ", " of ", " and next with ", " of ", "and ", " of ", ".", "Where is ", " ", " located and how ", " unit of ", " are there?", "This is an interesting scenario. This would require ", "function calls. 2 times for ", " and 1 time for ", "Still more questions arise.", "Interesting possibilities, isn\u2019t it? My colleague ", "What if you could give a prompt that says:", "Now that we are clear on what we are trying to do and the different combinations, let us revisit what Function Calling is.", "I will take the liberty of borrowing information from a couple of documentation sources here. First up is the essence of what Function calling is and I really like the ", " that Anthropic provides and I reproduce it here. You can ", " or Claude with your favorite foundation LLM that supports function calling. I have modified the steps a bit to keep them simple.", "Using tools with Claude involves the following steps:", "1. Provide Claude with tools and a user prompt: (API request)", "Define the set of tools you want Claude to have access to, including their names, descriptions, and input schemas.", "Provide a user prompt that may require the use of one or more of these tools to answer, such as ", "2. Claude uses a tool: (API response)", "Claude assesses the user prompt and decides whether any of the available tools would help with the user\u2019s query or task. If so, it also decides which tool(s) to use and with what inputs.", "Claude constructs a properly formatted tool use request.", "3. Extract tool input, run code, and return results: (API request)", "On the client side, ", " with a new ", " message containing a ", " content block.", "4. ", "After receiving the tool results, Claude will use that information to formulate its final response to the original user prompt.", "Steps (3) and (4) are optional \u2014 for some workflows, Claude using the tool is all the information you need, and you might not need to return tool results back to Claude.", "If you are a visual person, I reproduce the diagram from the official ", ".", "Let\u2019s try to answer some of the questions that we had earlier.", "The source code for these experiments is all available ", ".", "github.com", "This is a standard Maven project with a ", " in the root folder, so you should be able to take the dependencies from there, should you want to recreate it in the different way.", "There are two Java main programs available:", "1.", " and", "2. ", "To run the programs, you will need to do the following in the respective Java files:", "We will come to each of the above programs and understand them in the following respective two sections.", "The source code file for this is :", "When I started off with my experiments on Function calling, I was using the Gemini Pro 1.0 model. We will focus on this model in this section.", "We will then look at what Gemini Pro 1.5 model enabled (Parallel Function calling) in the next section. This will help us understand some additional questions that we had raised in an earlier section and which I reproduce here:", "Let\u2019s understand the source code first:", "For the prompt ", ", we get the following output. You can see that we are being asked by the model to invoke the ", " method twice. Once for ", " and the other for ", ":", "For the prompt ", ", we get the following output. You can see that we are being asked by the model to invoke the ", " method first with the warehouse location as ", " and then we are asked to invoke the ", " method with the ", " as ", " and the ", " as ", ":", "So as you can see over here, the Gemini 1.0 Pro model is doing great. However it asks us to invoke the Functions one after the other.", "Enter Parallel Function calling.", "You would have noticed that the model response gives us a sequence of function calls to make one after the other. But if you look at it, it could have just determined that the functions can be invoked in parallel and could have given us a list of functions to invoke in the first original response itself. For e.g. if we had provided the following prompt: ", ", it should have given us two function calls that we need to make to getWarehouseLocation, one with warehouse location as ", " and the other with warehouse location as ", ". In that case, we could have made both the API calls ourselves, collected the response and given it back to the model in one shot to form the final response.", "From Gemini 1.5 Pro and Gemini 1.5 Flash models, the ", ". This means that we will need to modify our code to expect not just one function call or multiple ones that we will then need to make before handing the API results from those function calls back to the model. The documentation does highlight a ", ".", "I have provided another Java program in ", " and you will notice that we use another model here: ", ".", "If you now run the following prompt in the sample, ", " , you will find the response output is now as follows:", "You can see that in the initial response itself, we have 2 parts that are function calls. We can now parse this response and make the function calls in parallel and return back the response to the model for the final output.", "The code also needed to be changed to iterate through each of the ", " responses and not just the first one. We iterate through the ", ", invoke the function, collect the response and then send the aggregated response from our function call back into the model for the final response.", "Hope this demonstrates the Function calling feature in LLMs, specifically in Gemini.", "I don\u2019t want to rehash the documentation over here since the page could get updated over time but there are some excellent best practices listed over here vis-a-vis Function calling. These range from giving clear descriptions of your functions, parameters and more. Check it ", ".", "cloud.google.com", "Since Function calling is available across major LLM vendors and they have been releasing models at a pace that is unprecendeted, surely there has to be a project that is tracking this capability across LLMs and benchmarking them? Yes \u2014 there is and it is the Berkeley Function Calling Leaderboard. Check out the project and how your favorite LLM model compares to others.", "The Berkeley Function Calling Leaderboard (also called Berkeley Tool Calling Leaderboard) evaluates the LLM\u2019s ability to call functions (aka tools) accurately. This leaderboard consists of real-world data and will be updated periodically.", "gorilla.cs.berkeley.edu"]]}
{"author_name": "Riccardo Carlesso", "published_time": "2023-12-19T10:11:19.056Z", "title": "Hey Bard, write a responsive Javascript Search Engine app for me..", "twitter_creator": "@sreccardo", "twitter_image": "https://miro.medium.com/v2/da:true/resize:fit:1200/0*GRWdYdfz_8efocft", "content": [["Listen", "Share", "I suck at Javascript. \ud83d\ude12 It\u2019s time to admit it. \ud83d\ude05 Let\u2019s see how ", " helped me overcome this limitation\u2026 and create ", "!", "I tried for years to cope and survive in a world which seems to be unable to exist without Javascript, and last weekend I succumbed. Time to ask your favorite JS developer ", " to point you at some good documentation and start reading about this weird language.", " unless? Wait, what if an ", " could code the app for me? Maybe I\u2019m not good to start the project myself, but what if ", " can do it for me, I should be able to tweak the code myself.", " If you don\u2019t want to read my Italian drama, ", " (or see the ", ").", "Two days ago, I was babysitting my kids; playing with my mobile phone while they were playing with Lego\u2026", ".. and I started asking Bard a question. But wait, ", " I was quite surprised by the answer.", "What\u2019s my idea? Say ", ". But you can\u2019t accept a 1\u20132 seconds latency from a typical server-side website search.", "I want a search bar where I can start typing stuff and the choice starts to diminish. Then I want to have a number of cards with the results (from a static JSON \u2014 I\u2019ll make it dynamic in a next episode!). I also want to have some rudimental clicking to narrow down the choice, say with a Boolean \u201cis this a technical article).", "My kids are delving into plenty of Legos, so I have plenty of time to try a verbose and well planned prompt. After all, I want it to write an app for me! Let\u2019s not save time and details.", "Prompt 1: \u201c", "\u201d", "I\u2019m so ignorant on JS that I\u2019m not even sure this is something you can do fully on client-side ( ", "+ ", ") or if you need some server-side effort (add ", "to the mix) to provide the JSON (although on the server-side I have 20-year expertise \u2014 this part I can do without help).", "Now, Bard started with a confident \u201c", "\u201d but I don\u2019t trust what I see. Plus, I don\u2019t have a computer with me, so I can\u2019t try the code. I asked him to do two things that Google is really good at doing:", "Look:", "When I was home I had plenty to choose from: my \ud83d\udcec GMail inbox, my \ud83d\udcc3 Google Docs link. what I didn\u2019t know is that the conversation is saved conveniently in a top left tab, and you can pin it \u2014 until you\u2019re done with your project.", "I paste the JS / HTML code and\u2026 it works FROM SCRATCH! Teh first tentative works! Wow I\u2019m impressed. I start putting the ", " for posterity and for making potentially breaking changes.", "Prompt2. \u201c", "Result:", "Note that Bard gives me the ", " code, the ", "code , and also a pre-baked JSON which responds to my requirements (a ", " boolean and a float ", ").", "Prompt 3. ", "This made the final visualization a bit better (not much).", "Prompt 4. ", "And this is the first time Bard makes a mistake. He gives me a HTML code which seems like ", " (", " ):", "The app is currently served by cloud run here: ", "This is the final result in GIF format:", "The functionalities it demonstrates are:", "As a person who can\u2019t even code a ", " in Javascript, I was able to create a simple / dumb \u2014 yet customized \u2014 website ", " on a Saturday afternoon (when my wife was babysitting).", " gave me good code from the beginning, and responded correctly to the next 2 questions. The first error was at the 4th prompt (!). Also, on the negatives, the CSS for cards was pretty ugly so I had to fix it myself (luckily I speak some rudimental ", ").", "I found Bard can be a pretty good companion if you have time to kill away from keyboard, and you want to go with the flow in some brainstorming phase, ready to copy the content when you\u2019re back to your workstation."]]}
{"author_name": "Karl Weinmeister", "published_time": "2024-06-19T13:30:44.558Z", "title": "From notebook to Cloud Run service in 10 minutes: applied to Gemini Function Calling", "twitter_creator": "@kweinmeister", "twitter_image": "https://miro.medium.com/v2/da:true/resize:fit:1067/0*ojcMGsB2ds_23iym", "content": [["Google Cloud - Community", "Listen", "Share", "What if you see some code you really like in a Jupyter notebook? And you want to turn it into an app? Let\u2019s learn how in this blog post.", "Notebooks are fantastic for learning. You can walk through code step-by-step with helpful explanations, and even see previous execution results. As an example, ", " GitHub repository contains hundreds of Jupyter notebooks, covering everything from products to models to use cases.", "However, notebooks aren\u2019t the best things for running our code in production environments (you can find a number of articles on the internet explaining why!). Notebooks bundle a number of capabilities into a cell based approach, where you can also incorporate different code elements for learning and communication. But what happens when our app breaks? How do we use things like Cloud Operations for support? This requires us to \u2018rebuild\u2019 our concept from a notebook into something like an application that has more production attributes, and enables us to scale.", "There are a few steps required to bring the key concepts and code blocks from a notebook into an application. To reduce the number of moving parts, a straightforward way to do this is to use the Python-based ", " framework to include notebook code that can be executed in a Cloud Run service. The short version of this formula is:", "Sounds great, doesn\u2019t it? While this process will execute the code from end-to-end, it\u2019s probably not going to work like you expect it to. The notebook might repeat steps for learning purposes. There may be input parameters required, and there may also be manual steps in the text instructions of the notebook. Also, this notebook shows how to set up a longer-running server using the code in a Python Notebook. If you just need to execute the notebook on a schedule (\u201cone and done\u201d), you can use ", " or ", ".", "So, let\u2019s look at the real-world steps required to take a concept in a notebook to a running Cloud Run service. We\u2019ll use the ", " notebook as our example. ", " allows developers to connect Gemini models to external tools and APIs. It works by generating a structured data output with a function name and arguments, enabling the application to execute the function and return the results to the model.", "The process we\u2019re going to describe can apply to any notebook, but let\u2019s start by getting acquainted with this particular use case. And possibly learn a couple things about function calling along the way.", "We\u2019ll use one of the later scenarios described in the ", " to convert a text address to latitude and longitude. This structured data is passed on to the ", " to lookup an address. Note that the API supports both unstructured and structured ", ". By using Gemini to parse the user input, we can handle a wider variety of user input and then convert that into a structured query.", "The notebook defines a function ", ", with parameter types and descriptions, along with a \u201ctool\u201d with this function declaration.", "Gemini\u2019s ", " function provides a ", " parameter, which links the function declarations to the specified tool(s). For more info, see how to ", " in the documentation. We can see here where the notebook references the location tool:", "And finally, the notebook constructs a URL query to the ", " using the populated function call arguments from the model, given an address in a prompt.", "This function is what we\u2019ll expose in a Cloud Run service, so that it can be called repeatedly from a public endpoint.", "There are many ways we can develop a Cloud Run service, but let\u2019s do it entirely in the Cloud. Head on over to the Cloud Shell Editor (", ") and then create a new folder called ", ". This folder will contain all the things needed to deploy our application as a service.", "In this folder, we will create a ", " file with any packages we see used in the notebook. We see that the notebook installs ", " with this line:", "Along with notebook dependencies, we will also want to include dependencies required to serve our application using Flask. Those dependencies are listed in the ", " quickstart. Combining these together, our requirements.txt file should look like this:", "Let\u2019s start by getting the application running in exactly the same way it runs within the notebook. The notebook contains a static prompt with the ", " address. I won\u2019t provide all the code in this blog post, but I\u2019ll call out the important parts. For all of the code, you can access it ", ".", "So, let\u2019s create a ", " file. Here, we define a ", ", which is a decorator that tells Flask which function should be executed when the given URL is accessed. We will want to migrate code from the notebook which is executed each time into this function. Depending on the complexity of the notebook, you may need to create additional helper functions or classes.", "Note that I\u2019ve moved the Vertex AI model initialization code outside of this function, because we only need to execute this code once when the service starts. In this initialization code, we specify the region and other details, which you can modify as needed. There is no need to add authentication code as Cloud Run will use its ", ".", "Let\u2019s test our Flask application locally first. Start a new Cloud Shell Editor ", " window. Set your project using ", ". Simply run ", " and you can run the development server at the specified URL.", "If it works, let\u2019s move on to deploying to Cloud Run. It\u2019s as simple as ", ". The first time through, you can provide each parameter manually:", "You can do this programmatically through the following commands. After a one-time step to set your region, you can then ", ", which uses the Python ", " to pull in dependencies and build a container image. You can then ", " the image to Cloud Run.", "After deployment, you\u2019ll see a Cloud Run service URL. Command-click the URL to access the service in your browser. You should see the JSON result returned. Congratulations, you\u2019ve now successfully migrated notebook code to a Cloud Run service!", "There were a couple small changes I made to the original notebook, including changing the model to ", ", and updating the User-Agent in the header per the notebook instructions.", "This particular notebook did not contain any environment variables or secrets (e.g. API keys). If needed, you can set ", " programmatically or via the Console in Cloud Run. For sensitive information, you can ", " to the Cloud Run service that will be exposed as environment variables.", "What if you want to create an interactive application, not just serve up the same static example? Let\u2019s give it a shot.", "We\u2019ll start with creating a ", " to provide an HTML form where the user can submit an address and then see the result. We\u2019ll also use the ", " CSS framework to apply a Material Design look-and-feel, and ", " to apply syntax highlighting to the JSON response from the API.", "The next step is to create an index.html file in a new templates/ subdirectory. Omitting a lot of detail, we see that the template consists of both an input form and a section with the JSON response details.", "In ", " , the key changes include:", "Let\u2019s review the full, updated function:", "We can redeploy a new version of our Cloud Run service. Let\u2019s take a look. From the notebook, we now have a dynamic web application that uses the Gemini Function Calling API!", "Migrating from a notebook to an application is easier than ever with Cloud Run. If you\u2019d like to try a hands-on codelab experience, ", " can build on the concepts we reviewed. Good luck in your next project \u2014 whether that\u2019s using Function Calling, or applying what you\u2019ve learned here about notebook migration!"]]}
{"author_name": "Riccardo Carlesso", "published_time": "2024-03-05T15:38:18.048Z", "title": "Gemma is born!", "twitter_creator": "@sreccardo", "twitter_image": "https://miro.medium.com/v2/resize:fit:925/1*zktJLAqzgGa4ISoynpyMSQ.jpeg", "content": [["Google Cloud - Community", "Listen", "Share", "As a rubyist, I love gems.", "So imagine my delight and surprise when last week ", ", a family of open models available directly on `Kaggle`: ", ". Plus, it\u2019s ", "!", "If you\u2019re like me, a CLI kind of person, fear no more! I found a way to call Gemma with cURL (", " \u2014 said a wise man in Dodgeball \u2014 did he?).", "Don\u2019t believe me? Check out my ugly bash code here: ", "/", "I haven\u2019t tried that one out, I\u2019m sorry. It\u2019s in my todo list.", "As Barney would say ", "I got hooked by ", " by Mark Ryan which got me started.", "Please note that in this case you need ", " and have billing enabled. You need:", "1. A Gmail account (Google Account)", "2. A Google Cloud Project with ", ".", "If this doesn\u2019t scare you off, the easiest way is to:", "Once done, you should have something like this:", "Glad you asked!", "It took me one hour of digging but I can tell you, the JSON can be as simple as this:", "The output will look like this:", "So writing a shell wrapper is as easy as ", "plus a", "(latest code ", "):", "Deploying Gemma to Vertex AI and calling the model via curl is a ", ".", "And you, what are you waiting for?"]]}
