
== Article 1
* Title: 'RAG one-liners: curling a website with Gemma'
* Author: 'Riccardo Carlesso'
* URL: 'https://blog.devops.dev/comand-line-rag-with-ruby-bash-and-gemma-curling-a-website-without-apis-de69215d43df?source=rss-b5293b96912f------2'
* PublicationDate: 'Fri, 07 Jun 2024 09:50:32 GMT'
* Categories: retrieval-augmented-gen, ruby, llm, swimming

I recently did a RAG (Retrieval-Augmented Generation) demo in Ruby (interested? Check my code and bibliography). However, when I talk about RAG with my practitioners, they usually donâ€™t know where to start. I thought to myself (yes, I tend to speak to myself a lot, especially when I cycle orÂ swim):â€” â€œHey, RAG should be as easy as: cat content.prompt | sed â€œs/template/My real Contentâ€ | ollama gemma run!â€ (*)â€Šâ€”â€Šâ€œWaitâ€Šâ€”â€Šwhat?â€œâ€” â€œIs it not obvious? Maybe I should write an article aboutÂ it!â€(*) If this is obscure for you, just look a bit further down. Thereâ€™s a diagram toÂ explain.So here we are! Iâ€™m going to show you a real-life example which is useful in my triathlete daily routine, and hopefully is relateable toÂ you:My first swim in the Zurisee in 2024. Water temperature was 16Â°C!Â Brrrr!Coders: are you bored by too much text and want to jump to the code? Here itÂ is!Why RAG? What is RAGÂ again?In a nutshell, LLMs have a two problems:A tendency to hallucinate (ie, fabricate false news)Â andproduce outdatedÂ news.How do you fix this? By injecting vetted/recent data to address (1) and (2) respectively.In a nutshell, you â€œGoogle the solutionâ€ and add it to the prompt. This seems complicated, but itâ€™s not. Itâ€™s something likeÂ this:A RAG prompt, courtesy of AndreiÂ BondarevRAG (Retrieval-Augmented Generation) is just another prompt, where you inject your context somewhere in the middle (hoping the LLM will prioritize that knowledge over the previous one). And yes, the three dashes are really important (since prompt are in plain English, and not in JSON/YAML/protobuf).What are we trying toÂ solve?My problem is simple: I want to fetch my beloved Zurich lake water temperature; but hey, no API is available (no weather API for water temperature)!TL;DR Letâ€™s say you you want to talk to a Website and ask a question.First you need to retrieve its content (curl/wget)Then you want to inject this information into a prompt template.Then use the LLM ability to summarize/infer useful information.A high levelÂ diagramIâ€™m a swimmer and I love swimming in the lake in summer. However, water temperature is not advertised as well as air temperature via APIs. You have a bunch of German websites with some tables which change every yearâ€Šâ€”â€Šso it doesnâ€™t seem smart to build a proper parser there. Iâ€™ll let the LLM handle the complexity.A simple googling of â€œzurich see wasser temperaturâ€ fetches some websites:https://www.bodenseee.net/wassertemperatur/zuerichsee/https://www.badi-info.ch/_temp/zuerichsee-temperatur.htmhttps://www.zh.ch/de/umwelt-tiere/wasser-gewaesser/messdaten/wassertemperaturen.htmlYou donâ€™t speak German? Welcome to myÂ world!Detecting temperature from a picture? I like your thinking! Thatâ€™s what Gemini 1.5 excelsÂ at!My favourite â€œbadisâ€ (Swiss term for lido) which are close to my home are Seebad Enge (with fancy and elegant vibe, evening party,Â .. opens at 8am) and Seebad Utoquai (for Ironmen and grannies, opens at 7am). Theyâ€™re in front of each other but, due to current, they often have 1Â°C difference (~half 1Â°F if you insist with that imperial nonsense).Prerequisites and installation: Ollama andÂ GemmaTo run this, I will not use a Google Cloud product, for once, Iâ€™ll justÂ use:Gemma 7B (https://ai.google.dev/gemma), Googleâ€™s openÂ model.Ollama (https://ollama.com/) as a conveniente packageÂ managerIâ€™ve tried Ollama on a long intercontinental flight to the Philippines and it changed my life: an LLM running in localhost with no internet connection?!? Sign me up for this! And you can get open models from Facebook, Google, Microsoft, Mistral, OpenAI,Â .. I also love to create cheap embeddings with a model like nomic-embed-textÂ , my favorite.Download and install ollama for your OS (instructions in https://ollama.com/download)Download gemma: ollama pullÂ gemmaClone my code: git clone https://github.com/palladius/genai-googlecloud-scriptsenter the 15-ollama-gemma-RAG-curl-ruby/ folder.And youâ€™re good toÂ go!The promptSo hereâ€™s a prompt I refined after some trial and error (wasser-temperatur-rag.prompt.erb):# Note this code is ruby ERB (the ruby equivalent of python's Jinja)Can you please tell me the Water Temperature of Seebad Enge and Seebad Utoquai from this doc?I'll attach a document I just downloaded from the internet with current temperatures as of&lt;%= date_today %&gt;.=== Website curl ===Here are the real temperatures:&lt;%= rag_from_website %&gt;=== Sample answer ===Answer should be in JSON, something like:{     "Seebad Enge": ".." ,     "Seebad Utoquai": ".."}=== Your answer ===Your JSON answer (make sure to subsitute temperature with intefers you got from the Website Curl, also avoid the ```json``` part since its redundant):The codeI created some simple curl wrapper in Ruby ğŸ’ (you can of course use your own favorite language1 Itâ€™s so small and simple you wonâ€™t be able to resist porting in your fav language!) in curlit.rb.# More details here: https://github.com/palladius/genai-googlecloud-scripts/blob/main/15-ollama-gemma-RAG-curl-ruby/wasser-temperatur-rag.rbdef main(verbose: true)  # 1. get output frm website  rag_content = curlit(url: 'https://www.stadt-zuerich.ch/ssd/de/index/sport/schwimmen/wassertemperaturen.html')  # 2. renders the prompt with this information  rendered_output = substitute_with_rag(template_path: 'wasser-temperatur-rag.prompt.erb', rag_content:)  # 3. Calling Ollama takes a while, better to tell the user they'll have to wait a bit  puts "âŒ› Now lets wait for gemma to process it.. popen" if verbose  # 4. why piping in bash when you can do it natively in ruby and manage errors here?  json_output = pipe_into_gemma(rendered_output:)  # 5. Save onto JSON -&gt; see  save_sanitized_output_as_json(json_output:, file_name: 'output.json')endHereâ€™s how the execution looks like for./wasser-temperatur-rag.rbÂ :ricc@derek:ğŸ¡~/genai-googlecloud-scripts/15-ollama-gemma-RAG-curl-ruby$ ./wasser-temperatur-rag.rbâŒ› Now lets wait for gemma to process it.. popen{     "Seebad Enge": "18.5Â°C",     "Seebad Utoquai": "18Â°C"}Is it correct? Letâ€™sÂ check:Screenshot taken a few minutes after the code was executed on 2024â€“06â€“02: https://www.stadt-zuerich.ch/ssd/de/index/sport/schwimmen/wassertemperaturen.htmlğŸ‘ As you can see the output is as I expected. Note that if you prefer Fahrenheit, itâ€™s a trivial change to the prompt! remember:IMHO, this sums up the AI revolution!This is too complicated! You promised me a one-liner!So youâ€™re a lazy developer! I like you, we should beÂ friends!RAG can be as simple as Retrieve and Ask a question, so it can becomes as simple as: curl website | ollama run gemma "Ask a Question":# See Makefile for more exmaples$ ./curlit.rb https://www.boot24.ch/chde/service/temperaturen/zugersee/ | ollama run gemma Tell me the current water temperature of Zuger SeeThe current water temperature of Zuger See is **17Â°C**.I would have broken it down to two lines for readability butâ€Šâ€”â€Ša challenge is a challenge! ğŸ˜ƒWait a minuteâ€Šâ€”â€Šis it really 17Â°C? Or did they just hallucinate?The Zugersee water temperature todayYup, seems like 17Â°C! AndÂ TA-DA!ğŸ“š MoreÂ readingsCode of this article: https://github.com/palladius/genai-googlecloud-scripts/tree/main/15-ollama-gemma-RAG-curl-rubyMy Gemini News Crawler full-fledged RAG code: https://github.com/palladius/gemini-news-crawlerRAG one-liners: curling a website with Gemma was originally published in DevOps.dev on Medium, where people are continuing the conversation by highlighting and responding to this story.

== Article 2
* Title: 'Gemma is born!'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/google-cloud/gemma-is-born-c5ea9ba576ec?source=rss-b5293b96912f------2'
* PublicationDate: 'Mon, 26 Feb 2024 16:23:09 GMT'
* Categories: machine-learning, gemma, google-cloud-platform, curl, vertex-ai

As a rubyist, I loveÂ gems.So imagine my delight and surprise when last week Google announced Gemma, a family of open models available directly on `Kaggle`: google/gemma. Plus, itâ€™sÂ free!Gemma isÂ born!But I know nothing about ML andÂ Kaggle!If youâ€™re like me, a CLI kind of person, fear no more! I found a way to call Gemma with cURL (â€œif you can curl it, you can call it in any language!â€â€Šâ€”â€Šsaid a wise man in Dodgeballâ€Šâ€”â€ŠdidÂ he?).Donâ€™t believe me? Check out my ugly bash code here: https://github.com/palladius/genai-googlecloud-scripts/tree/main/10-gemma-is-born/How do I install GemmaÂ locally?I havenâ€™t tried that one out, Iâ€™m sorry. Itâ€™s in my todoÂ list.How do I install Gemma in theÂ Cloud?As Barney would say â€œGlad you asked!â€. I got hooked by this great video by Mark Ryan which got meÂ started.Please note that in this case you need access to Google Cloud and have billing enabled. You need:1. A Gmail account (Google Account)2. A Google Cloud Project with billingÂ enabled.If this doesnâ€™t scare you off, the easiest way isÂ to:Click on https://www.kaggle.com/models/google/gemmaClick on Gemma on Vertex Model Garden in thatÂ page.Follow instructions.Once done, you should have something likeÂ this:Gemma has been installedOk, so what now? How do I interact withÂ Gemma?Glad youÂ asked!Click on the model (blue lineÂ above).Under â€œDeploy and Testâ€ tab you should see an awesome â€œTest your model â€. It accepts aÂ JSON.It took me one hour of digging but I can tell you, the JSON can be as simple asÂ this:{  "instances": [{    "prompt": "What's the difference between a city bike and a racing bike?",    "max_tokens": 1000  }]}The output will look likeÂ this:{  "predictions": [    ".. GEMMA_ANSWER_HERE ..."  ],  "deployedModelId": "6852805176160419840",  "model": "projects/980606839737/locations/us-central1/models/google_gemma-7b-it-1708849093570",  "modelDisplayName": "google_gemma-7b-it-1708849093570",  "modelVersionId": "1"}So writing a shell wrapper is as easy as cURLplus ajq(latest codeÂ here):# You just change these to your model_id and your project_idENDPOINT_ID="6294864597715255296"PROJECT_NUMBER="980606839737"# this contains the questionINPUT_DATA_FILE="gemma-input-hello.json"# this contains the answer (not really needed but good for training purposes)OUTPUT_DATA_FILE="gemma-output-hello.json"curl \    -X POST \    -H "Authorization: Bearer $(gcloud auth print-access-token)" \    -H "Content-Type: application/json" \    https://us-central1-aiplatform.googleapis.com/v1/projects/${PROJECT_NUMBER}/locations/us-central1/endpoints/${ENDPOINT_ID}:predict \    -d "@${INPUT_DATA_FILE}" | tee "$OUTPUT_DATA_FILE"PREDICTION=$(cat "$OUTPUT_DATA_FILE" | jq .predictions[0])echo -en "$PREDICTION\n"ConclusionsDeploying Gemma to Vertex AI and calling the model via curl is aÂ breeze.And you, what are you waitingÂ for?Gemma is born! was originally published in Google Cloud - Community on Medium, where people are continuing the conversation by highlighting and responding to this story.

== Article 3
* Title: 'Hey Gemini, explain me these picturesâ€Šâ€”â€Šin bash â€'
* Author: 'Riccardo Carlesso'
* URL: 'https://blog.devops.dev/hey-gemini-explain-me-these-pictures-in-bash-06c03d0d0512?source=rss-b5293b96912f------2'
* PublicationDate: 'Thu, 14 Dec 2023 15:16:16 GMT'
* Categories: bash, gemini, curl, genai, google

Hey Gemini, explain me these picturesâ€Šâ€”â€Šin bashÂ ğŸ§‘ğŸ½â€ğŸ’»Gemini is finallyÂ out!Andâ€¦ itâ€™s multimodal! Which means, you can use both images and text to ask for questions (the output is only textâ€Šâ€”â€Šfor nowÂ ğŸ˜‰).Note: all the code snippets (and images) in here are available in my GitHubÂ repo.Letâ€™s getÂ started!Hey Gemini, describe what youÂ see..Letâ€™s start by an album by my favourite band:One of my favourite albums of all timeâ€Šâ€”â€Šwill Gemini recognize it?$ ./gemini-generic.sh images/genesis-selling-england.jpg Describe what you see# ğŸ¤Œ  QUESTION: Describe what you see# ğŸŒ¡ï¸ TEMPERATURE: 0.2 # ğŸ‘€ Examining image images/genesis-selling-england.jpg: JPEG image data, JFIF standard 1.01, resolution (DPI), density 96x96, segment length 16, baseline, precision 8, 536x528, components 3. # â™Š Gemini no Saga answer for you:The cover of Genesis album Selling England by the Pound features a painting by British artist Paul Whitehead. The painting depicts a group of people in a park, with a man sleeping on a bench in the foreground. The people are allwearing clothes from the 1920s or 1930s, and the painting has a nostalgic, almost surreal feel to it. The colors are muted and the figures are slightly blurred, which gives the painting a dreamlike quality. The painting is also full of symbolism, with the sleeping man representing England and the people around him representing the different aspects of English society. The paintinghas been interpreted in many different ways, but it is generally seen as acommentary on the state of England in the 1970s.â™Š The cover of Genesisâ€™ album Selling England by the Pound features a painting by British artist Paul Whitehead. The painting depicts a group of people in a park, with a man sleeping on a bench in the foreground. The people are all wearing clothes from the 1920s or 1930s, and the painting has a nostalgic, almost surreal feel to it. The colors are muted and the figures are slightly blurred, which gives the painting a dreamlike quality. The painting is also full of symbolism, with the sleeping man representing England and the people around him representing the different aspects of English society. The painting has been interpreted in many different ways, but it is generally seen as a commentary on the state of England in theÂ 1970s.A quick googling confirms that Paul Whitehead actually covered one of my favourite album of all times. If you love Genesis too and want to see me play Firth of Fifth, please check my youtubeÂ video.Letâ€™s try this catÂ now:This is a cat from Google sampleÂ imagesGemini: A cat is walking in the snow. The cat is brown and white and has a long tail. The cat is looking at the camera. The snow is white and is covering theÂ ground.How did I doÂ it?If you check my bash script (gemini-generic.sh), you can see the request looks likeÂ this:data=$(_base64_encode_mac_or_linux "$IMAGE") # Mac or Linux should both work!# ...cat &gt; "$REQUEST_FILE" &lt;&lt;EOF{'contents': {      'role': 'USER',      'parts': [        {'text': '$QUESTION'},        {'inline_data': {            'data': '$data',            'mime_type':'image/jpeg'}}]    }}EOFThe hardest part is actually the base64conversion, and making it work both on my Mac and on my Linux (as our grand-parents say in Italy â€œYou wanted /bin/bash.? Now you pedal!â€).An Italian image, explained inÂ ItalianThe city of XXX, in Italy. Seen from the YYY palace (surprise!). Picture from my colleague Daria../gemini-explain-image.sh images/italian-town.jpg[..] This is a view of the city of Trento, Italy from the Buonconsiglio Castle.Gemini (ğŸ‡¬ğŸ‡§): This is a view of the city of Trento, Italy from the Buonconsiglio Castle.Letâ€™s ask the same inÂ Italian:$ GENERATE_MP3=true ./gemini-explain-image-italian.sh images/italian-town.jpg# ğŸ¤Œ  QUESTION: Descrivimi cosa vedi in questa immagine# ğŸŒ¡ï¸  TEMPERATURE: 0.2# ğŸ‘€ Examining image images/italian-town.jpg: JPEG image data, JFIF standard 1.01, aspect ratio, density 1x1, segment length 16, Exif Standard: [TIFF image data, little-endian, direntries=1, software=Google], baseline, precision 8, 926x1230, components 3.# â™Š Gemini no Saga answer for you: La foto mostra una loggia con delle colonne in pietra che incorniciano la vista di una cittÃ . La cittÃ  Ã¨ circondata da montagne e si possono vedere i tetti delle case e le torri delle chiese. Il cielo Ã¨ azzurro e ci sono delle nuvole bianche.# TTS_LANG: it-ITWritten .tmp.tts-output.json. curl_ret=0t.audio.encoded: ASCII text, with very long lines (65536), with no line terminatorst.mp3:           MPEG ADTS, layer III, v2,  32 kbps, 24 kHz, Monauralt.mp3: MPEG ADTS, layer III, v2,  32 kbps, 24 kHz, MonauralAll good. MP3 created: 't.La foto mostra una loggia con delle colonne in pie.mp3'Gemini (ğŸ‡®ğŸ‡¹): La foto mostra una loggia con delle colonne in pietra che incorniciano la vista di una cittÃ . La cittÃ  Ã¨ circondata da montagne e si possono vedere i tetti delle case e le torri delle chiese. Il cielo Ã¨ azzurro e ci sono delle nuvoleÂ bianche.As you see, Italian is more verbose (my wife says the same about me!) but itâ€™s not aware of the Buonconsiglio Palace. Interesting! I presume the Italian model has less training material to learn from than the EnglishÂ one.Makes sense.Btw, I highly recommend Trento, I was cycling around there: great views and greatÂ wines!Comparing twoÂ imagesHow about comparing twoÂ images?Gemini constellation vs Saint Seiyaâ€™s GeminiÂ saint.Some sample code is in my Makefile for convenience. tryÂ this:ricc@derek:~/git/genai-googlecloud-scripts/07-bash-gemini-multimodal-jam$ ğŸ¼ !makmake compare-two-geminis ./gemini-generic-two-pics.sh  images/gemini-constellation.png   images/saga-blue-hair.jpgâ™Šï¸ Question: Can you highlight similarity and differences between the two? Also, do you recognize the same person in both of them? ğŸ‘€ Examining image1 images/gemini-constellation.png: images/gemini-constellation.png: PNG image data, 1675 x 1302, 8-bit/color RGBA, non-interlaced.  ğŸ‘€ Examining image2 images/saga-blue-hair.jpg: images/saga-blue-hair.jpg: JPEG image data, JFIF standard 1.01, aspect ratio, density 1x1, segment length 16, baseline, precision 8, 193x261, components 3. â™Šï¸ Describing attached image: The two images are of the constellation Gemini and the anime character Gemini Saga. The constellation is said to represent the twins Castor and Pollux, while the character Gemini Saga is a Gemini Saint in the anime series Saint Seiya. Both images depict two figures that are connected to each other. The constellation is made up of stars, while the character is a human.â™Š Response: ï¸ The two images are of the constellation Gemini and the anime character Gemini Saga. The constellation is said to represent the twins Castor and Pollux, while the character Gemini Saga is a Gemini Saint in the anime series Saint Seiya. Both images depict two figures that are connected to each other. The constellation is made up of stars, while the character is aÂ human.Today weâ€™ve learnt something we certainly didnâ€™t know: a constellation is made of stars, while the guy on the right is humanÂ ğŸ˜ƒIntroducing Audio!Why donâ€™t we throw some audio in theÂ mix?Iâ€™ve added a tts.shÂ , which creates an MP3 out of an english (or Italian!) text given in ARGV. Convenient uh?My kids beside American Santa Klaus (we live in Zurich, thereâ€™s a Santa for every language and ethnicity!)A few weeks ago my kids went to visit Santa Klaus.. the American Santaâ€Šâ€”â€Štheyâ€™ll tell you thereâ€™s another who speaks German instead, heâ€™s called Samiklaus, they still canâ€™t decide if its the same guyâ€Šâ€”â€Šmy kids are X and Y year old; how old? Letâ€™s askÂ Gemini!$ make age-test# equivalent to:$ GENERATE_MP3=true ./gemini-generic.sh images/ricc-family-with-santa.jpg Tell me the age of the people you see, from left to right.# ğŸ¤Œ  QUESTION: Tell me the age of the people you see, from left to right.# ğŸŒ¡ï¸  TEMPERATURE: 0.2# ğŸ‘€ Examining image images/ricc-family-with-santa.jpg: JPEG image data, JFIF standard 1.01, aspect ratio, density 1x1, segment length 16, Exif Standard: [TIFF image data, little-endian, direntries=3, software=Google], baseline, precision 8, 1164x826, components 3.# â™Š Gemini no Saga answer for you:1. 30-352. 2-33. 40-454. 2-35. 60-65[..]All good. MP3 created [..]Now Iâ€™m older than 40â€“45 (46) so technically speaking this is a mistake, but as a human interaction I will consider it as a successÂ ğŸ˜‰Now this is not the best of MP3s, but it works! Check out ricc-family-with-santa.jpg.mp3.You can also find Trento in Italian here: italian-town.jpg.mp3.Something useful now: understand aÂ diagram!A colleague told me yesterday: the power of Gemini is that not only â€œheâ€ understands text and images, also the very complex relationship between items in a diagram. This morning my Accrux earphones wouldnâ€™t work, so I decided to understand how they work. I downloaded the User Manual, uploaded to Gemini as image, and asked Gemini a few questions.Iâ€™m not so young anymore so I canâ€™t read this unless itâ€™s printed on A3. And I respect Amazon tooÂ much!From UI, this is easy peasy. Upload image and ask question:And what about bash? Letâ€™s do the same fromÂ CLI:$ make read-instruction-manual-for-me [..]./gemini-generic.sh images/instruction-manuals/Acrux-User-Manual-4700503.png '1. How do i TURN it on? 2. Where is the power button located? 3. Is this the one called ANC?'# ğŸ¤Œ  QUESTION: 1. How do i TURN it on? 2. Where is the power button located? 3. Is this the one called ANC?# ğŸŒ¡ï¸  TEMPERATURE: 0.2 # ğŸ‘€ Examining image images/instruction-manuals/Acrux-User-Manual-4700503.png: PNG image data, 1664 x 929, 8-bit/color RGBA, non-interlaced. # â™Š Gemini no Saga answer for you:1. Long press the power button for 2 seconds.2. The power button is located on the right earcup.3. Yes, this is the one called ANC.# Note: No mp3 file generated (use GENERATE_MP3=true to generate one)My question (I actually asked the questions one by one, so think of it as an avalanche-chat):How do i TURN itÂ on?Where is the power buttonÂ located?Is this the one calledÂ ANC?# â™Š Gemini answer:1. Long press the power button for 2 seconds.2. The power button is located on the right earcup.3. Yes, this is the one calledÂ ANC.Bingo!An unexpected Games of Thrones plotÂ twistThis is the avatar I use in Google. Iâ€™m really curious to see what gemini can infer from here, also because I used someÂ filters.Riccardo in the Amsterdam office, a few years/kilos ago.$ ./gemini-explain-image.sh images/ricc-logo.png[..]This is a photo of a man standing behind a Google Cloud Platform cutout.The man is smiling and wearing a shirt that says, â€œThatâ€™s what I do,I drink and I know things.â€ The background is a brick wall with blueand white accents.â™Š Gemini: This is a photo of a man standing behind a Google Cloud Platform cutout. The man is smiling and wearing a shirt that says, â€œThatâ€™s what I do,I drink and I know things.â€ The background is a brick wall with blueand whiteÂ accents.And I thought! Of course, this is my favourite Games of Thrones t-shirt. Letâ€™s see if heÂ knows:Q: Do you recognize the quote in this personÂ tshirt?$ GENERATE_MP3=true ./gemini-generic.sh images/ricc-logo.png Do you recognize the quote in this person tshirt[..] "That's what I do, I drink and I know things" is a quote from the TV show Game of Thrones, said by the character Tyrion Lannister.â™Š Response: â€œThatâ€™s what I do, I drink and I know thingsâ€ is a quote from the TV show Game of Thrones, said by the character Tyrion Lannister.And you also have the MP3 if you wish: images/ricc-logo.png.mp3Chapeau, Gemini!ConclusionsCalling Gemini is easy, fun and powerful!Easy. If you can invoke Gemini via curl, imagine how easy it is to invoke it with your favourite language! Try out our SDK in Python, Node, Java, Go. For everything else thereâ€™s REST/cURL!Fun. look at how many use cases Iâ€™ve shown in this page: comparing two images, asking questions abuot an image, a writing, age of people,Â .. possibilities areÂ endless.Powerful. Multi-modal is a game changer. And for what I hear, more modes are coming.Â ğŸ˜‰Did you like this? Want more of this? Write it in the comments!RiccardoHey Gemini, explain me these picturesâ€Šâ€”â€Šin bash ğŸ§‘ğŸ½â€ğŸ’» was originally published in DevOps.dev on Medium, where people are continuing the conversation by highlighting and responding to this story.

== Article 4
* Title: 'Hey Bard, write a responsive Javascript Search Engine app for me..'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/@palladiusbonton/hey-bard-write-a-responsive-javascript-search-engine-app-for-me-b2585e55385e?source=rss-b5293b96912f------2'
* PublicationDate: 'Mon, 20 Nov 2023 14:01:41 GMT'
* Categories: javascript, bard-ai, google-cloud-run, search, json

I suck at Javascript. ğŸ˜’ Itâ€™s time to admit it. ğŸ˜… Letâ€™s see how Bard helped me overcome this limitationâ€¦ and create thisÂ app!I tried for years to cope and survive in a world which seems to be unable to exist without Javascript, and last weekend I succumbed. Time to ask your favorite JS developer Chris to point you at some good documentation and start reading about this weird language.Promises, promisesâ€¦ unless? Wait, what if an LLM could code the app for me? Maybe Iâ€™m not good to start the project myself, but what if Bard can do it for me, I should be able to tweak the codeÂ myself.TL;DR If you donâ€™t want to read my Italian drama, jump to the code (or see the result on CloudÂ Run).Two days ago, I was babysitting my kids; playing with my mobile phone while they were playing withÂ Legoâ€¦Little Seby in the Lego room in GoogleÂ Zurich.. and I started asking Bard a question. But wait, â€œhow do I make sure the question remains available when I go back home to my big computer?â€ I was quite surprised by theÂ answer.The CodingÂ conceptWhatâ€™s my idea? Say you have a gazillion articles / assets and want to be fast at searching on them. But you canâ€™t accept a 1â€“2 seconds latency from a typical server-side websiteÂ search.Flash is searching through all my docs ina static, local JSON! Barry likes to win easyÂ :)I want a search bar where I can start typing stuff and the choice starts to diminish. Then I want to have a number of cards with the results (from a static JSONâ€Šâ€”â€ŠIâ€™ll make it dynamic in a next episode!). I also want to have some rudimental clicking to narrow down the choice, say with a Boolean â€œis this a technical article).A quick and customizable searchÂ bar.Write a goodÂ promptMy kids are delving into plenty of Legos, so I have plenty of time to try a verbose and well planned prompt. After all, I want it to write an app for me! Letâ€™s not save time andÂ details.Prompt 1: â€œI would like to build a small and responsive search engine. The DB Is small and static so I donâ€™t need anything complicated. I just want to have a frontend JavaScript where you start typing a word and it searches for all the elements matching this word in title or description. The only important thing to me is responsiveness so every time you type a letter it starts selecting just things matching it, so you want to write say â€œpistachioâ€, the selection should start kicking in already with â€˜pâ€™, â€˜piâ€™, â€˜pisâ€™, and so on. Can you help me write theÂ code?â€Iâ€™m so ignorant on JS that Iâ€™m not even sure this is something you can do fully on client-side ( index.html+ script.js) or if you need some server-side effort (add node.jsto the mix) to provide the JSON (although on the server-side I have 20-year expertiseâ€Šâ€”â€Šthis part I can do withoutÂ help).Bard reply might surpriseÂ you..Bard answerNow, Bard started with a confident â€œSure, hereâ€™s the JavaScript code for a small and responsive search engine that works with a static database:â€ but I donâ€™t trust what I see. Plus, I donâ€™t have a computer with me, so I canâ€™t try the code. I asked him to do two things that Google is really good atÂ doing:export in email (cheap / persistent)export to GDoc (richer / canÂ edit)Look:Bard exports to GDocs and GMail in case you want to elaborate on your brainstorming idea.When I was home I had plenty to choose from: my ğŸ“¬ GMail inbox, my ğŸ“ƒ Google Docs link. what I didnâ€™t know is that the conversation is saved conveniently in a top left tab, and you can pin itâ€Šâ€”â€Šuntil youâ€™re done with yourÂ project.I paste the JS / HTML code andâ€¦ it works FROM SCRATCH! Teh first tentative works! Wow Iâ€™m impressed. I start putting the code into github for posterity and for making potentially breakingÂ changes.Letâ€™s add complexity. Add a Boolean and multi-parameter search!Prompt2. â€œWow! Say I want to do something a bit more complex for example selecting a Boolean (isTechnical=true/false) which is in the frontend as checkbox and in the JSON, and I want to sort the result by some kind of rating? Can you help me add those two functionalities both to html and to JavaScript?â€Result:The result is impeccableâ€Šâ€”â€Šexcept with the Pasta Primavera which definitely not ğŸ‡®ğŸ‡¹-compliant!Note that Bard gives me the index.html code, the script.jscodeÂ , and also a pre-baked JSON which responds to my requirements (a isTechnical boolean and a floatÂ rating).Add little nits: CSS andÂ CardsPrompt 3. Wow this is amazing! Final thing, can you share a little css snippet to make this look nice and professional? Iâ€™m bad atÂ CSS.This made the final visualization a bit better (notÂ much).Prompt 4. Fantastic! Last thing. I would like to visualize the search result as nicely formatted cards, think of three rectangles per row, with title description and maybe a small image turned into a square with rounded corners. Can you help me with html andÂ CSS?And this is the first time Bard makes a mistake. He gives me a HTML code which seems like Angular (ngForÂ ):This is a mistake: `ngFor` only exists in Angular framework (I presume?)ResultThe app is currently served by cloud run here: https://js-simple-search-bsl7ylv4hq-ew.a.run.app/This is the final result in GIFÂ format:The functionalities it demonstrates are:responsive sub-JSON search function (every letter triggers a search on Title or Description)boolean selection (isTechnical orÂ not)Sort by rating (number) or by TitleÂ (string)ConclusionsAs a person who canâ€™t even code a strlen() in Javascript, I was able to create a simple / dumbâ€Šâ€”â€Šyet customizedâ€Šâ€”â€Šwebsite within an hour on a Saturday afternoon (when my wife was babysitting).bard.google.com gave me good code from the beginning, and responded correctly to the next 2 questions. The first error was at the 4th prompt (!). Also, on the negatives, the CSS for cards was pretty ugly so I had to fix it myself (luckily I speak some rudimental Boostrap).I found Bard can be a pretty good companion if you have time to kill away from keyboard, and you want to go with the flow in some brainstorming phase, ready to copy the content when youâ€™re back to your workstation.

== Article 6
* Title: 'What is toilet paperâ€™s right side?'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/@palladiusbonton/what-is-toilet-papers-right-side-8da0504d6d0b?source=rss-b5293b96912f------2'
* PublicationDate: 'Tue, 08 Aug 2023 16:37:20 GMT'
* Categories: toilet-paper, ruby-on-rails

Thereâ€™s very little on this planet as polarizing as â€œthe right position of toilet paperâ€: what I call cis-centralis /pendens, or trans-centralis/murÄlis? (yup, I just made those upâ€Šâ€”â€Šstart googlingÂ ğŸ‘¹).A puffin trying to find the right position to his toiletÂ paperAs a Ruby on Rails developer, Iâ€™ve been long interested in Default over Configuration (and POLA). What is the default/correct solution? I thought I knew.. until I gotÂ married.myhome:  bath_ricc:    toilet_paper_position: '?!?' # looking for a golden default..  bath_kids:    toilet_paper_position: '?!?' # must clearly be the same golden default!The officialÂ SolutionThe inventor of toilet paper patented the solution in 1891 (patent US459516, apparently Seth Wheeler was a Googler ante litteram).However.... Itâ€™s actually more complicated than itÂ looks.I have this sheldonic tendency of thinking people disagreeing with me on trivial things being automatically wrong; however, I often stand corrected. This is one of those timesÂ :) After consulting a number of people who disagreed with me, trying to hold my initial disgust in this barbaric act of â€œmuralic paperâ€ (Are you crazy?!? It gets dirty just before touching your butt!) I realized there are cases where that configuration can actually doÂ better.If you have a cat, the cat will likely like to play with theÂ paper.If you have a son, say his name is SebastianÂ . I donâ€™t have any experimental proof that a daughter would yield the same results. Please comment to provide further dataÂ points.There might be other occasions where this might be true (eg, windy location, gravity working against you, lot of liquid close to the precious paper,Â ..). Please contribute with your own experience.ConclusionsIn this factious article, I took a dilemma, showed the solution, and then showed that the solution can fail due toÂ .# This is the perfect solution which works for my home.my_home:  bath_ricc:    toilet_paper_position: pendens   bath_kids:    toilet_paper_position: muralisI believe after reading this, you will be a more complete human. Youâ€™re welcomeÂ ğŸ¤£

== Article 7
* Title: 'Spaghetti Bolognese donâ€™t exist!!1!'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/@palladiusbonton/spaghetti-bolognese-dont-exist-1-2088d85909dd?source=rss-b5293b96912f------2'
* PublicationDate: 'Fri, 21 Apr 2023 16:09:23 GMT'
* Categories: 

(yes, the exclamation marks are correctÂ ğŸ˜‰)Spaghetti Bolognese: Everyone knows themâ€¦ except Italians.An imaginary dish,Â .. just like square root of -1, or like a word which doesnâ€™t exist... just uselesserRight, read it again if you donâ€™t believe meâ€¦ in Italy we donâ€™t prepare that kind ofÂ pasta.What the hell, you may be wonderingâ€¦ Italy is famous for spaghetti and bolognese sauce (that we call â€œragÃ¹ alla bologneseâ€ or simply ragÃ¹, (from ragoÃ»t), but we would never mix these two things in the sameÂ dish).Why oh why, you may as well think? I think the reason can be found in twoÂ ways.First, they come from two different cultures. Spaghetti come from the south, where a simpler tomato, basil, and veg sauce would seem more appropriate.Second, spaghetti are slippery, so theyâ€™re not as good to â€˜retainâ€™ a demanding sauce as a beef ragÃ¹ is. As every bolognese person can tell you, appropriate pastas for bolognese ragÃ¹ can be: tagliatelle (first choice), pennette/penne/mezzepenne, conchiglie, fusilli, maccheroni,Â â€¦ in general every form of â€˜pasta rigataâ€™ (ribbed pasta). Pasta rigata is a pasta that is not smooth, so thas sauce is more likely to stay with the pasta, instead of slipping down. I think the main reason why every person from Bologna is horrified by the mere idea of associating spaghetti with our proud ragÃƒÂ¹ is that we perfectly know (because everyone has made that mistake once in their life) what happens if you do that: spaghetti would ruthlessly come up your fork completely naked of any red or meaty traceâ€¦ just to leave a gloomy surprise in the very end: a bloody pool of meat and tomato just looking at you as if asking â€œNow what?â€. And unless you are Italian, you donâ€™t know what scarpetta is. but thatâ€™s anotherÂ story.What does wikipedia say?As Wikipedia (as of 19dec09) says about Bolognese_sauce:[â€¦] Bolognese sauce known in Italian as ragÃ¹ alla bolognese, pronounced [, ragÃ¹ bolognese, or simply ragÃ¹) is a meat-based sauce in Italian cuisine, typical of the city of Bologna. It is customarily used to dress tagliatelle al ragÃ¹ and to prepare lasagne alla bolognese.Italian ragÃ¹ alla bolognese is a slowly cooked meat-based sauce, and its preparation involves several techniques, including sweating, sautÃ©ing and braising. Ingredients include a characteristic soffritto of onion, celery and carrot, different types of minced or finely chopped beef, often alongside small amounts of fatty pork. White wine, milk, and a small amount of tomato paste or tomatoes are added, and the dish is then gently simmered at length to produce a thickÂ sauce.Outside Italy, the phrase â€œBolognese sauceâ€ is often used to refer to a tomato-based sauce to which minced meat has been added; such sauces typically bear little resemblance to the Italian ragÃ¹ alla bolognese, being more similar in fact to the ragÃ¹ alla napoletana from the tomato-rich south of the country. Although in Italy ragÃ¹ alla bolognese is not used with spaghetti (but rather with flat pasta, like tagliatelle),[2][3][4] so-called â€œspaghetti bologneseâ€ has become a popular dish in many other parts of the world.[whereIâ€™m not Italian: what can we do toÂ comply?If you werenâ€™t born with the privilege of ğŸ‡®ğŸ‡¹ Italianity, Iâ€™ve built a software for you to teach you the proper abbinamenti (couplings) between pastas andÂ sauces.Itâ€™s simple, install my app from github: https://github.com/palladius/pastaItâ€™s written in Ruby on Rails (of course), itâ€™s fully Dockerized, and features a beautiful matrix of pastas/sauces:The code which defined good condiments is here, under db/seeds.rbÂ .

== Article 8
* Title: 'Migrate â˜ï¸ GCP projects across organizations, with gcloud'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/google-cloud/how-to-migrate-projects-across-organizations-c7e254ab90af?source=rss-b5293b96912f------2'
* PublicationDate: 'Tue, 18 Apr 2023 13:16:26 GMT'
* Categories: gcp-security-operations, google-cloud-platform, migration

Nel mezzo del cammin di nostra vita, mi ritrovai per una selva oscura, chÃ© la diritta via era smarritaâ€â€” Dante Alighieri(*), DivineÂ Comedy(*) the Italian version of Shakespeare, justÂ betterTranslated for non-ğŸ‡®ğŸ‡¹: some day I was encouraged by some external entity to move a lot of projects from 5 of my organizations (source) to another organization (destination).TL;DR If you find this article too long and you want to jump to the code, click on this ğŸ™ğŸ˜ºÂ gist.My two boys in front of The Gates of Hell, MusÃ©e Rodin, Paris,Â 2022.Since Iâ€™m the best kind of Software Engineerâ€Šâ€”â€Šthe bad coder but lazy kind ğŸŒâ€Šâ€”â€ŠI decided to script all my move and document for posterity. Also showing you the mistakes I found along the way might be helpful (maybe?).This is explained in this GCP page(s): https://cloud.google.com/resource-manager/docs/project-migrationPlease remember to dump your current IAM config for the 2+ organisations in case you want to recreate the previous config you just changed. Having a local JSON config for your Org is always a good thing to do. ğŸ˜‰ For instance:$ gcloud alpha organizations get-iam-policy $ORG_ID \ - format json &gt; out/org-$DOMAIN-iam.jsonYou can also add specific policies you care about (see below why this is important):$ gcloud resource-manager org-policies describe constraints/iam.allowedPolicyMemberDomains \ --organization $ORG_ID | tee -a out/org-$DOMAIN-policies.logKnow the current state of theÂ worldYou need to know the state of the world (your world). The best way for me to understand where I stand isÂ this:Use this awesome repo https://github.com/palladius/org-folder-projects-graph I wrote a few years ago. Note: It launches gcloudonce per folder, itâ€™s super-inefficient (uses bash over APIs), but has the nice aspect that it keeps all JSON from gcloud locally. This is a big plus in every case except today: â–¶ï¸ after the move you might need a make cache-clean before re-launching it.Launch the script for one Org. SampleÂ output:Output from an Org dump script written by anÂ ItalianIf you donâ€™t care about the folder structure at all, a simpler way is to just invoke something likeÂ this:# Option 1: Flat structure (simple)$ gcloud projects list - filter \  "parent.id=$ORG_ID AND parent.type=organization"For example:flat taxonomy fromÂ script1Note this wonâ€™t work if you have a complex hierarchy, which is why you probably want to use my script to get all the ramification of yourÂ org.You can also play with GCP Asset Inventory (see great stackoverflow tip) to get the list without the ğŸ• pizza slices, but youâ€™d be sadder ğŸ˜«Â , Iâ€™mÂ sure.# Option 2: Tree structure, with AssetInventory.$ gcloud beta asset search-all-resources \  --asset-types='cloudresourcemanager.googleapis.com/Project' \  --scope="organizations/$ORGID" | egrep '^name:' | cut -d/ -f 5Whatever your workflow, Iâ€™m pretty sure youâ€™ll have exceptions, which is why having a spreadsheet (https://spreadsheet.new/ ) will help you big time. I state the source org, destination org, source folder,. source project id, expected destination folder, and notes for my exceptions.Please also read this https://cloud.google.com/resource-manager/docs/handle-special-cases for special cases, like VPC-SC or GCS BucketÂ lock.Letâ€™s now find out the IAM state for your org. This is pretty sweet and took me a while to research andÂ adapt:# Beautiful query which flattens (multiple roles &lt;=&gt; multiple identities).$ gcloud organizations get-iam-policy "$ORG_ID" \  -flatten='bindings[].members' \  -format='table(bindings.role,bindings.members)' |   tee "t.org-iam-policy.$ORG_DOMAIN.txt"ROLE MEMBERS[..]roles/billing.admin         group:gcp-billing-admins@example.orgroles/billing.admin         user:ricc@example.orgroles/billing.creator       domain:example.orgroles/browser               group:gcp-billing-admins@example.orgroles/cloudasset.owner      user:palladius@example.orgroles/cloudasset.owner      user:ricc@example.orgroles/orgpolicy.policyAdmin group:gcp-org-administrators@example.orgroles/orgpolicy.policyAdmin user:riccardo@example.orgroles/resourcemanager.projectCreator user:palladiusbonton@example.orgroles/resourcemanager.projectMover   user:ricc@example.orgI donâ€™t want to read the docs: Letâ€™s first try bruteÂ force!I hate it when someone provides me with a working solution and I apply it and donâ€™t know the mystical secrets that led to it. (I invented the half derivative when I was 16, just so you knowâ€Šâ€”â€Šand yes, as you can imagine, itâ€™s useless).So letâ€™s try to smash our head over it, one mistake at aÂ time.Error 1Â : â€œThe caller does not have permissionâ€Letâ€™s try it, the command is simpleâ€Šâ€”â€Šbut wonâ€™t work the first 27 times you try it. You have my word. But still, try it. Iâ€™ll use the same ids as in publicÂ docs:# Your Org Admin account, and gcloud already working for it:export POWER_ACCOUNT='my-power-account@gmail.com'# SRC ORG: 12345678901 source.example.com export SRC_ORG_ID="12345678901"export SRC_ORG_DOMAIN='source.example.com'# DST ORG: 45678901234 destination.example.comexport DST_ORG_ID="45678901234"export DST_ORG_DOMAIN='destination.example.com'$ gcloud beta projects move my-project-in-src-org \  --organization=$DST_ORG_ID --quiet- '@type': type.googleapis.com/google.rpc.DebugInfo  detail: |-    [ORIGINAL ERROR] generic::permission_denied: The caller does not have permission    com.google.apps.framework.request.StatusException: &lt;eye3 title='PERMISSION_DENIED'/&gt; generic::PERMISSION_DENIED: The caller does not have permission [google.rpc.error_details_ext] { code: 7 message: "The caller does not have permission" }# Computer says no!The most powerful IAM permission you can have on a GCP Organization is organizationAdmin. Youâ€™d think that if you have that power, you can do anything in that universe, right? Think twice! There are additional powers that role doesnâ€™t have (and Iâ€™m kind of relieved it is this way).One of them is the OrgPolicyAdmin, which means that as OrgAdmin, you first need to give yourself that power before you can use it (not very UNIX, I know, but definitely safer).# Set IAM for SrcOrg$ gcloud organizations add-iam-policy-binding $ORG_ID \  --member='user:$ACCOUNT' \  --role='roles/resourcemanager.organizationAdmin' \  --role='roles/resourcemanager.projectIamAdmin' \  --role='roles/resourcemanager.projectMover'  \  --role='roles/orgpolicy.policyAdmin'  \  --condition=NoneFor this command to work, you need the issuer (gcloud config get account) to have the power to grantâ€Šâ€”â€Šbut this is beside the scope of thisÂ doc.In the UI it will look something likeÂ thisNote: Org Policies are documented here.Error 2: Constraint `constraints/resourcemanager.allowedExportDestinations`Letâ€™s try to migrate a projectÂ now:This is NOT where I would have expected a Input/Output error!Â ğŸ˜†Next step: Let me configure the allowedPolicyMemberDomains policy first. (Why? It failed but I forgot to capture the error, my bad. For this error you just need to trustÂ me).# This might fail..$ gcloud beta projects move "my-project-in-src-org" \  --organization="$DST_ORG_ID" --quiet# This sets target customer_id!$ gcloud resource-manager org-policies allow --organization "$SRC_ORG_ID" \  iam.allowedPolicyMemberDomains 'C04abcdef' # gives access to SrcOrg to Dest idNote. The â€œC0..â€ id is the Directory Customer Id you get from gcloud organization list for your destination org.- Iâ€™m readyâ€¦ Now itâ€™s going to work, Iâ€™m sure! - Oh waitâ€¦Â ğŸ™ˆDamn, anotherÂ error!What does it mean? It means that you need to configure your â€œOrg Firewallâ€ to allow projects out of your Source Organization. If youâ€™re a Cisco Certified engineerâ€Šâ€”â€Šyou already know what error is coming next.. Allowlisting paloozaÂ ğŸ˜œ!# Aloow SRC to export to DSTgcloud resource-manager org-policies allow --organization "$SRC_ORG_ID" \  resourcemanager.allowedExportDestinations \  "under:organizations/$DST_ORG_ID"# Note the "under:" needed to pass the policy all the way down from that folderError 3: constraints/resourcemanager.allowedImportSourceThis is similar to the error above, but itâ€™s from the receiving end.To fix: damn I did it on the UI. My apologies. I would presume itâ€™s really the symmetrical opposite, like:# This is me guessing but I should be too far. # TODO(ricc): remove powers from DST and try againgcloud resource-manager org-policies allow --organization "$DST_ORG_ID" \  resourcemanager.allowedImportSource \  "under:organizations/$SRC_ORG_ID"[optional] Refining theÂ securityNote that to make things simple I gave a single user OrgAdmin for two organizations.simple/insecure (pet project). The simple way is to have a single powerful account (gcloud account, eg â€œpoweruser@company.comâ€) which has access to both SRC and DST orgs. This worked for me, as I was the sole owner of them all and I was under time pressure.complex/more secure (enterprises). In a more enterprise scenario, youâ€™d have a less pressing time concern and you would probably be obliged to have smaller IAM permissions on both sides, probably having two individuals to carry on these two tasks. Which is why itâ€™s nice to have them gcloud-ed.In the second case, follow theÂ docs:Source OrgÂ :IAM: roles/resourcemanager.projectIamAdmin in the project to move (but if I want to do it at scale Iâ€™ll set it up in theÂ org)IAM: roles/resourcemanager.projectMover in the parent resource.Again, if youâ€™re lazy you can just set these two at Org level and get it done once and for all. But then remember to remove this access at the end of the org move. You can also a time-bound IAM constraint ending tomorrowâ€Šâ€”â€Šthis is for lazy people like me who donâ€™t trust themselves to remember to close a parenthesis tomorrow and rather close it as you openÂ it.OrgPolicy: constraints/resourcemanager.allowedExportDestinations. You can set the domain id (â€œC0somethinâ€) as allowed destination or you can be lazy as me and just set them ALL, depending if youâ€™re an enterprise who wantgs to do it well or you just want to get it done soon and you donâ€™t care much of the org you leaveÂ behind.On the destination organization:IAM: ProjectMoverOrg Policy: constraints/resourcemanager.allowedImportSourceMeta-Scripts and tidy migrationIf you migrate 300 projects from 5 orgs into one, you might want to use Folders or itâ€™ll be a very nasty place tomorrow (â€œwhere does this project come from again?â€). You can track pre-migration state in a few ways: you can dump the state on a lot of TXT in local file (but I usually remove them with my ruthless make cleans), on a Google Spreadsheet, or have your business logic do the job for you. Letâ€™s explore thisÂ one..Hereâ€™s the migration in a nutshell: all the Source folder structure complexity is flattened in the Destination under a single specialÂ folder.I had some fun coding in Ruby (in a private repo which is in no shape to be publicized unless you make a lot of noise in the commentsÂ ğŸ˜‰).Nothing better than a script which writes a script for you. This is useful when you want to iterate through 10 migrations but you know that ONE project doesnt fit into it -&gt; I create a 10 line blurb and then I just comment out the one I dont need. Itâ€™s also good for documenting which commands you ran on local file. Let me showÂ you.$ bin/13-gcloud-move-projects-to-joonix-under-domain.rb palladius.eu palladius-eu-infra prova-enonomai-palldius-eu  gcpprojects2sheets [...]gcloud beta projects move 'palladius-eu-infra' --folder='1038774614299' --quiet       # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.eugcloud beta projects move 'prova-enonomai-palldius-eu' --folder='1038774614299' --quiet       # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.eugcloud beta projects move 'gcpprojects2sheets' --folder='1038774614299' --quiet       # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.euNote, this commands are dumped into a deterministically-named bash script which contains the commands, so I can comment out the projects I donâ€™t want to move (yet); the deterministic naming means that if I run it again, it will re-apply the same logic to the same file, which is good if you have it in version control and if the logic is not trivial (eg, find all projects under a folderÂ ğŸ˜‰).Letâ€™s now call my ğŸ• pizza software (TM) after a make cache-clean to see if the migration worked:$ git clone https://github.com/palladius/org-folder-projects-graph/ $ cd org-folder-projects-graph/(base) ricc@mbp:ğŸ¡~/org-folder-projects-graph$ ./recurse_folders.rb palladius.joonix.net[...]â”œâ”€ ğŸ“‚ 133363080569 (Spostamenti CrossOrg)    â”œâ”€ ğŸ“‚ 737267668168 (SPECIAL_ORPHANS)        â”œâ”€ ğŸ• cicd-platinum-test041 (713582791007)    â”œâ”€ ğŸ“‚ 1038774614299 (palladius-eu)        â”œâ”€ ğŸ• original-bot-383907 (642248137380)        â”œâ”€ ğŸ• prova-enonomai-palldius-eu (898096115869)        â”œâ”€ ğŸ• gcpprojects2sheets (383820962508)        â”œâ”€ ğŸ• palladius-eu-infra (845199147079)[..]And it did! A round of applause.Plenty of magic here: my script accepts a FolderId ( ğŸ‡®ğŸ‡¹ â€œCrossOrg Movemementsâ€) and it searches for the subfolder named like the domain (creating it if its not found).Â Wow!My script was configured to generate a folder called like the org (changing dot with dash for obvious reasons): 133363080569. My script would create a subfolder if needed, get that folder id and create the scripts forÂ me:gcloud beta projects move 'palladius-eu-infra' - folder='1038774614299' - quiet # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.eugcloud beta projects move 'prova-enonomai-palldius-eu' - folder='1038774614299' - quiet # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.eugcloud beta projects move 'gcpprojects2sheets' - folder='1038774614299' - quiet # migrate project given via CLI to proper subfolder of palladius.joonix.net under palladius.euAfter a lot of lost hours debugging, I wrote my bash code-writing ruby script to add meaningful comments aside the command. This was a stroke of genius (for my limited coding abilities) since all this movement includes non-mnemonic numbers, so using the domain names after the comment helped me understand what i wasÂ doing.Another error: bad chars in project nameÂ (!)Now, I donâ€™t know how many of you will find this error, but if you do, Google is your friend (and mine too) and youâ€™ll find this article, Iâ€™m sureÂ ğŸ˜„I had project ids since 2012, and Iâ€™ve given them names which included parenthesis. For instance, the project id palladiusbonton-nobilling had an astonishing description (Project Name): â€œPalladiuBontonTest (No Billing)â€. Now this was never a problem in my life until some dayâ€¦ some of them gave me error. Interestingly enough, most came from one single error type: I gave my project ids a bad name: I should have known better than BonÂ Jovi!Solution: I scripted in ğŸ’ ruby a project description change which just removes the parenthesis (and the regex is DRY in case I find something new). To be on safe side, I change bad chars into empty spaces ğŸ™‚, as I love Queen more than BonÂ Jovi.$ bin/11-migrate-orphans.rb [..]goliardia2                     Goliardia2 (no billing uffi)              576689998257palladiusbonton                palladiusbonton (billing disabled)        606248867298palladiusbontontest-nobilling  PalladiuBontonTest (No Billing)           690861376600riccardo-chatroom1             riccardo-chatroom-one (billing disabled)  941891472972# EXECUTE this to fix the project: gcloud projects update 'palladiusbonton' --name='palladiusbonton  billing disabled ' # Former description was: 'palladiusbonton (billing disabled)'palladiusbontontest-nobilling // 690861376600 ### 'PalladiuBontonTest (No Billing)'# EXECUTE this to fix the project: gcloud projects update 'palladiusbontontest-nobilling' --name='PalladiuBontonTest  No Billing ' # Former description was: 'PalladiuBontonTest (No Billing)'riccardo-chatroom1 // 941891472972 ### 'riccardo-chatroom-one (billing disabled)'# EXECUTE this to fix the project: gcloud projects update 'ricc

== Article 9
* Title: 'My favourite Toolchain'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/@palladiusbonton/my-favourite-toolchain-831b56ba6fc5?source=rss-b5293b96912f------2'
* PublicationDate: 'Wed, 12 Apr 2023 11:31:45 GMT'
* Categories: 

How midjourney imagines my favourite Toolchain, in 4 familiar colorsÂ ;)Recently, my alter ego Richard asked a provocative question: are you happy with your toolchain, is it modernÂ enough?Before answering that question, o thought, first I need to assess it and enumerate it. Letâ€™s see ğŸ™ˆ what toolchain is:Coding IDE: vscode. It is so amazing, Iâ€™ve tried something different, the OSS version, but itâ€™s fast, extensible and just wow. The only missing thing is, a fast edit-over-ssh. But itâ€™s not MSÂ fault.Favourite language: Ruby. I know what youâ€™re thinking, but it makes me happy, and efficient. Iâ€™ve tried other languages and frameworks, and nothing beats RoR in 2022 (Iâ€™ve spent 2 weekend to prove myself wrong, failing). If I need efficiencyApp Development: Ruby on Rails. Iâ€™ve given Js a go many times, itâ€™s spectacular on many parts, but developing an app in a DRY way (rather than duplicating code for BE/FE) and having a single solid choice over a fragmentation of libs for meÂ wins.CI: GCP Cloud Build and skaffold. I might be biased as GooglerÂ here.CD: Cloud Deploy and GitHub actions. Again, biasedÂ ğŸ˜ŠCI/CD: Skaffold plus GCP tooling on top of github repos. Use kustomize to DRY the manifests.Serverless: Cloud Run and App Engine. Never been a huge fan of Cloud functions, or maybe I just donâ€™t get themÂ :)IaaSÂ : Google Cloud Platform. If you ask my favourite product, Iâ€™d say GCE as it was my firstÂ love.PaaS: App Engine +Â Heroku.SaaS: GitHub, Google Workspace, Atlassian Bitbucket.Infra as Code: Pulumi and Terraform. Back in the days,Â Chef.kubernetes: I love GKE remotely, and minikube locally. Kustomize to DRY my manifests. Not a big fan of Helm, tried it and hated it. Kpt is in my TODOÂ list.Docker: I love docker-compose, although it doesnâ€™t scale much. For simple single-apps, I use that. For more complex stuff, skaffold.Testing: I invented a bash testing suiteâ€Šâ€”â€Ša friend told me Iâ€™d become famousâ€Šâ€”â€ŠI didnâ€™t ğŸ˜ƒ. Happy to share code with you if you ask, and youâ€™re back to the asylumÂ tonight.More toÂ followâ€¦Infra as Code is so hot rightÂ now!

== Article 10
* Title: 'Ruby on Rails-like ORM and scaffolding in Golang anyone?'
* Author: 'Riccardo Carlesso'
* URL: 'https://medium.com/@palladiusbonton/ruby-on-rails-like-orm-in-golang-anyone-gopher-random-4558047da41?source=rss-b5293b96912f------2'
* PublicationDate: 'Thu, 22 Dec 2022 09:16:13 GMT'
* Categories: 

This is a typical Gopher writing codeâ€¦ on RailsÂ ğŸšˆ!I â¤ï¸ Ruby on Rails. With all my ğŸ’›. I can rapid-prototype any 3â€“4 models app in a couple of hours and do a POC in an afternoon, and this is thanks to scaffolding. I can write this and RoR will create a proper Model, Controller, and ~4 Views (MVC) and DB schema with rock-solid change-managementÂ :rails generate scaffold Album title:string year:decimal singer:referencerails generate scaffold Track title:string duration:decimal album:referencesrails generate scaffold Article title:string body:string comment:string rating:integer url:string is_public:booleanbundle exec rake db:migrateHowever, my colleagues bully me thatğŸ”»Ruby is dead, ğŸšˆ Rails is dead, and long live ğŸ“¦ Node.Js and so on. So I thought: itâ€™s ğŸ… December, letâ€™s learn a new language. I thought of learning C#â€Šâ€”â€Šjust kidding (Iâ€™m already a pianist)â€” I thought that Golang was the way to go. As of December 1st ğŸ…, everyone on Facebook has a single thing in mind: Whammageddon!After taking a 2h course in Go and doing my first word count, my head got big and I thought: Iâ€™m now ready for the next step: a silly Whammageddon app to record my friends whammageddon spectacular stories!Whammageddon rulesâ€Šâ€”â€Šif you just woke up from a criogenic coffin yesterdayÂ :)ğŸšˆ Golang on RailsÂ optionsI tried (meaning, I spent 2 hours each) a few options (Bee, Revel, Buffalo), and Iâ€™ll describe them in order. Note that I might be unfair to the first in chronological order as my ability to go get something wasnâ€™t as good as in try number 3Â :)Queen Bee might be biased on whoÂ winsâ€¦1: ğŸÂ BeegoCode source: https://github.com/beego/beegoBeego was the first Google result for â€œRuby on Railsâ€ for go. To be fair to bee, I was on a long flight to Israel and tried to make it work with jumpy airport internet and the experience was horrible (as a true Italian, I thought of filing a PR to enlarge gocapabilities with a new 4-letter verb). Nothing wrong with Bee,Â though.This is how a migration looksÂ like:Pros ğŸ˜ƒ:I really enjoyed its ability to simply create ORM model from CLI.Â Example:$ bee generate scaffold riccardo_post -fields 'title:string,body:text,active:bool,published:datetime'It also allows to have different models connecting to different datasources (wOOt! I wonder how you do a JOIN from Europe to Australia). Example:Â ```bee generate scaffold user -fields="first_name:string:255,last_name:string:255,email:string:255" -driver=postgres -conn="postgres://user:pass@localhost:5432/db?sslmode=disable"bee generate scaffold riccpost -fields="title:string,body:text" -driver=mysql -conn="root:@tcp(127.0.0.1:3306)/test"CLI allows to create docs and swagger interface on the fly via bee run -downdoc=true -gendoc=trueÂ .I ~supports 80% scaffolding for model, controllers, DB/migration but creates an empty view (github issue). In my case, it gets the controller dependencies wrong (probably because its a monorepo) and I need to manually fix it ( long path to beego-whammageddon/models). ğŸ˜«It politely asks me if I want to create model, controller, resource, migration and migrate the DB itself!Â Wow!bee dockerize creates a Dockerfile for you. Iâ€™ve always wished for the same onÂ RoR!Cons ğŸ˜¢Â :Lack of Scaffolding capabilities on the view side. It rocks on model/migration, but it doesnâ€™t create the neededÂ views.Scaffolding on Controller side seems broken to me. I get Method Not Allowed, which is answered here (missing Get()functionâ€Šâ€”â€Šwhy would you doÂ that?!?)2. ğŸ¥³Â RevelSource: https://revel.github.io/When I read from Amrit: â€œ If you have used Ruby on Rails, you are going to love Revel. If you are a Python developer who has used Django, you will like Beego.â€ I felt: what have I done in the past 4 hours?!? I had an agnition, or shall I sayâ€¦ a revelation!!Revel has a very simple and straightforward docs page which will guide you through a multi-page, stateless form-rich hello world within 10Â minutes.It has modules (pluggable packages) for NewRelic, Static files, Logging,Â ..It has nice examples repos; the closest to Ror seems to be the Booking app (docsâ€Šâ€”â€Šcode). Code is fromÂ 2020.It uses GORP as ORM. However, after first excitement, I realized also Revel lacks a proper way toÂ scaffoldI was too stupid to make it work and I threw the sponge. Hoewver with 2 lines you can actually get thisâ€Šâ€”â€Šwow!Commands to achieve this (copied fromÂ here):git clone https://github.com/revel/examples.git "${GOPATH}/src/github.com/revel/examples"#DOESNT WORK FOR ME - I might be stuipidrevel run github.com/revel/examples/booking# THIS WORKS FOR MErevel run "${GOPATH}/src/github.com/revel/examples"So if you have time to understand and reverse engineer the booking app, youâ€™re going to enjoy Revel a lot. However, the inability to scaffold from scratch is a real turn off forÂ me.Here I totally failed to do any scaffolding: no model/controller/view for me. Iâ€™ll probably spend some time in the weekend reverse-engineering the booking appâ€¦Â ğŸ˜¢3. ğŸ¦¬Buffalosource: https://gobuffalo.io/Now, the first thing you see with Buffalo isâ€Šâ€”â€ŠwOOt? They even bothered adding a CSS! Clearly, thereâ€™s some money and a real company behind this (like DHH and Basecamp behind Rails). Graphics is captivating and I love itÂ already!First, it uses pop which supports PostgreS Cockroach MySQL and Sqlite3 out of theÂ box.With Soda and Fizz, you get a Rails-like experience in setting up the DB and migrating it:// migrate UPcreate_table("users") {  t.Column("email", "string", {})  t.Column("twitter_handle", "string", {"size": 50})  t.Column("age", "integer", {"default": 0})  t.Column("admin", "bool", {"default": false})  t.Column("company_id", "uuid", {"default_raw": "uuid_generate_v1()"})  t.Column("bio", "text", {"null": true})  t.Column("joined_at", "timestamp", {})}// migrate downdrop_table("users")This is absolutely fantasticÂ ! Unfortunately it doesnâ€™t seem to have the CLI interface to create a scaffold ğŸ˜, while you can reach a great experience by typing the code yourself.To use generators, it looks to me you need to install pop as a separate module: https://github.com/gobuffalo/buffalo-pop. After doing so, you get buffalo pop g --help which returns this same output. (Before, it would return a weirdÂ output).Now, I was able with a single command line (non documented anywhere, just by trying out!) to create a new model with my fields and also its migration, but not the controller and the viewsÂ :/# For '--skip-migration' read belowbuffalo pop g model --skip-migration foobar RiccTitle:string RiccDescription:textbuffalo pop g model --skip-migration barbaz RiccDescription:text UltimateAnswer:int32 Active:boolNote: he first time you call the function without skip miogration, but every subsequent invocation it will create another migration for the same model; so if you just want to auto-magically update the model until you got it right, you call it asÂ above.Like in Rails, DB can be easily configured in a single YAML or via ENV variables.# database.yamldevelopment:  dialect: postgres  database: whamageddon_buffalo_development  user: postgres  password: postgres  host: 127.0.0.1  pool: 5test:  url: {{envOr "TEST_DATABASE_URL" "postgres://postgres:postgres@127.0.0.1:5432/whamageddon_buffalo_test?sslmode=disable"}}production:  url: {{envOr "DATABASE_URL" "postgres://postgres:postgres@127.0.0.1:5432/whamageddon_buffalo_production?sslmode=disable"}}[Golang vs Ruby] on ORM and ScaffoldingSo my first impressions on Go (vsÂ Ruby):â•blazing fastâ•compile in a single binaryâ€Šâ€”â€Šeasy to dockerize/ship.â– Go has a tendency to want your app to be single repo. What if I want to have 3 folders under the same repoâ€Šâ€”â€Šcan I MrÂ Go?No thanks Mr GoÂ :)â– Lack of a convincing zero-brain scaffolding technique.ConclusionsLike Bonucci told the Brits at the end of European Championship in London, â€œne dovete mangiare di pastasciutta!â€ (you still have a lot of pasta to eat), I believe Golang has still a long way to go to get to Ruby feasts when it comes to ORM and Rails rapid-prototyping.Bonucci is a recognized national hero in Italy after this. Expect rolling the arm gesture to catch up with emojipedia startingÂ v14.0!This morning, while swimming, I wanted to create a nice table with 3â€“5 stars for all, but Medium doesnâ€™t support tables. Hence Iâ€™ll just get the winner perÂ topic:Documentation: revel &amp;Â buffaloLook and feel:Â BuffaloDocumentation for day-0 hello app:Â revel.Model CLI creation: beego.Migration: Buffalo (thanks toÂ fizz)Scaffolding: none (railsÂ rulez).However, go has a long list of advantages that makes this passage worthwhile:damn easy dockerization (single chubbyÂ binary)no dependencies craze in prod (single chubbyÂ binary)Note there are also other solution apart from Bee, Revel and Buffalo: Gin&amp;Gonic, Goji, Iris,Â â€¦ and I hear echo also strikes a great balance (think of Sinatra if youâ€™re a rubyist).Note. Iâ€™m a ~day1 user of Go. Iâ€™m pretty sure some things Iâ€™ve said might be incorrect. Iâ€™d be honoured to get your feedback in form of comments.
